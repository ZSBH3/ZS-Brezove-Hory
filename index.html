<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Informaƒçn√≠ tabule ‚Äî Z≈† B≈ôezov√© Hory</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    html, body {
      height: 100%;
      width: 100%;
      font-family: "Poppins", "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(120deg, #07162c, #102a5c, #07162c);
      background-size: 300% 300%;
      animation: bgmove 20s infinite alternate;
      color: #eef3f8;
      overflow: hidden;
    }

    @keyframes bgmove {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }

    .board {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      width: 100%;
      padding: 20px;
      gap: 20px;
      text-align: center;
    }

    h1 {
      font-size: 3rem;
      color: #ffd64e;
      text-shadow: 0 0 20px rgba(255, 214, 78, 0.3);
      margin-bottom: 10px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 25px;
      width: 100%;
      max-width: 1600px;
    }

    .card {
      background: rgba(255,255,255,0.08);
      border-radius: 18px;
      padding: 25px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
      backdrop-filter: blur(10px);
      transition: transform 0.3s ease, background 0.3s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      background: rgba(255,255,255,0.12);
    }

    .icon {
      font-size: 2.5rem;
      margin-bottom: 10px;
      color: #ffd64e;
    }

    h2 {
      margin-bottom: 10px;
      font-size: 1.5rem;
      color: #ffd64e;
    }

    #cas {
      font-size: 2.3rem;
      font-weight: bold;
      margin-bottom: 5px;
    }

    #datum {
      font-size: 1.2rem;
      opacity: 0.8;
    }

    #pocasi {
      font-size: 1.3rem;
      margin-top: 10px;
    }

    #obed {
      text-align: left;
      font-size: 1rem;
      line-height: 1.6;
      overflow-y: auto;
      width: 100%;
      max-height: 400px;
      scrollbar-color: #ffd64e transparent;
    }

    footer {
      margin-top: 20px;
      font-size: 0.9rem;
      opacity: 0.7;
    }

    @media (max-width: 600px) {
      h1 { font-size: 2rem; }
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="board">
    <h1><i class="fa-solid fa-school"></i> Informaƒçn√≠ tabule Z≈† B≈ôezov√© Hory</h1>

    <div class="grid">
      <div class="card">
        <i class="fa-regular fa-clock icon"></i>
        <div id="cas">--:--:--</div>
        <div id="datum"></div>
        <div id="pocasi">Naƒç√≠t√°m poƒças√≠...</div>
      </div>

      <div class="card">
        <i class="fa-solid fa-utensils icon"></i>
        <h2>Dne≈°n√≠ obƒõd</h2>
        <div id="obed">Naƒç√≠t√°m j√≠deln√≠ƒçek...</div>
      </div>

      <div class="card">
        <i class="fa-regular fa-calendar-days icon"></i>
        <h2>Pl√°n akc√≠</h2>
        <p>Zat√≠m ≈æ√°dn√© akce nejsou napl√°nov√°ny.</p>
      </div>

      <div class="card">
        <i class="fa-solid fa-bullhorn icon"></i>
        <h2>Aktuality ze ≈°koly</h2>
        <p>Zat√≠m ≈æ√°dn√© aktuality.</p>
      </div>
    </div>

    <footer>üîÑ Str√°nka se aktualizuje ka≈æd√Ωch 15 minut ‚Ä¢ ¬© 2025 Z≈† B≈ôezov√© Hory</footer>
  </div>

  <script>
    // üïí ƒåas a datum
    function updateTime() {
      const now = new Date();
      const d = now.toLocaleDateString('cs-CZ', { weekday:'long', year:'numeric', month:'long', day:'numeric' });
      const t = now.toLocaleTimeString('cs-CZ');
      document.getElementById('cas').textContent = t;
      document.getElementById('datum').textContent = d;
    }
    setInterval(updateTime, 1000);
    updateTime();

    // üå¶Ô∏è Poƒças√≠ (Open-Meteo)
    async function loadWeather() {
      try {
        const res = await fetch("https://api.open-meteo.com/v1/forecast?latitude=49.69&longitude=14.01&current_weather=true");
        const data = await res.json();
        const teplota = data.current_weather.temperature;
        const vitr = data.current_weather.windspeed;
        document.getElementById("pocasi").innerHTML = `üå°Ô∏è ${teplota} ¬∞C | üí® V√≠tr ${vitr} km/h`;
      } catch (e) {
        document.getElementById("pocasi").innerText = "Nelze naƒç√≠st poƒças√≠.";
      }
    }
    loadWeather();

    // üçΩÔ∏è J√≠deln√≠ƒçek p≈ôes proxy
    async function loadObed() {
      try {
        const proxyUrl = "https://api.allorigins.win/get?url=" + encodeURIComponent("https://zsbrezovehory.cz/jidelni-listek/");
        const res = await fetch(proxyUrl);
        const data = await res.json();
        let obsah = data.contents;

        // zkus√≠me vybrat jen sekci j√≠deln√≠ƒçku (vƒõt≈°inou v <main>)
        const mainMatch = obsah.match(/<main[\\s\\S]*?<\\/main>/i);
        if (mainMatch) obsah = mainMatch[0];
        document.getElementById("obed").innerHTML = obsah;
      } catch (e) {
        document.getElementById("obed").innerText = "Nelze naƒç√≠st j√≠deln√≠ƒçek.";
      }
    }
    loadObed();

    // üîÅ Auto-refresh po 15 minut√°ch
    setTimeout(() => location.reload(), 15 * 60 * 1000);
  </script>
</body>
</html>
