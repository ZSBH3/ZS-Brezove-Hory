<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Informační tabule — ZŠ Březové Hory</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    /* ======== ZÁKLADNÍ NASTAVENÍ ======== */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      height: 100%;
      width: 100%;
      overflow: hidden;
      font-family: "Poppins", "Segoe UI", Roboto, sans-serif;
      color: #eaf0f8;
      background: radial-gradient(circle at 30% 20%, #0d1835, #081226, #030a15);
      background-size: 400% 400%;
      animation: gradientMove 25s ease infinite;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* ======== HLAVNÍ OBSAH ======== */
    .board {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      width: 100%;
      height: 100%;
      padding: 2rem;
      gap: 1.5rem;
    }

    h1 {
      font-size: 3rem;
      color: #ffd94e;
      text-shadow: 0 0 20px rgba(255,217,78,0.3);
      font-weight: 700;
      letter-spacing: 1px;
    }

    .subtitle {
      font-family: "Roboto Condensed";
      color: #a9b5c9;
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }

    /* ======== MŘÍŽKA ======== */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(360px, 1fr));
      gap: 30px;
      width: 100%;
      max-width: 1700px;
      height: auto;
    }

    /* ======== KARTY ======== */
    .card {
      background: rgba(255,255,255,0.07);
      border-radius: 22px;
      padding: 30px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      text-align: center;
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
      backdrop-filter: blur(12px);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border: 1px solid rgba(255,255,255,0.15);
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(255,255,255,0.15);
    }

    /* ======== IKONY ======== */
    .icon {
      font-size: 3rem;
      color: #ffd94e;
      margin-bottom: 10px;
      text-shadow: 0 0 25px rgba(255,217,78,0.5);
    }

    h2 {
      font-size: 1.7rem;
      color: #ffd94e;
      margin-bottom: 10px;
      font-weight: 600;
    }

    /* ======== ČAS A DATUM ======== */
    #cas {
      font-size: 2.8rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    #datum {
      font-size: 1.3rem;
      opacity: 0.8;
      font-family: "Roboto Condensed";
      letter-spacing: 0.5px;
    }

    /* ======== POČASÍ ======== */
    #pocasi {
      font-size: 1.3rem;
      margin-top: 20px;
      line-height: 1.5;
      font-weight: 500;
    }

    /* ======== JÍDELNÍČEK ======== */
    #obed {
      width: 100%;
      max-height: 420px;
      overflow-y: auto;
      text-align: left;
      font-size: 1rem;
      line-height: 1.7;
      padding-right: 10px;
      scrollbar-color: #ffd94e transparent;
    }

    #obed::-webkit-scrollbar {
      width: 8px;
    }
    #obed::-webkit-scrollbar-thumb {
      background-color: #ffd94e;
      border-radius: 10px;
    }

    /* ======== OSTATNÍ ======== */
    p {
      font-size: 1.05rem;
      color: #cfd8e2;
      line-height: 1.6;
    }

    footer {
      font-size: 1rem;
      color: #9ca7b6;
      margin-top: 15px;
      opacity: 0.8;
    }

    @media (max-width: 768px) {
      h1 { font-size: 2rem; }
      #cas { font-size: 2rem; }
      .card { padding: 20px; }
    }

    /* ======== ANIMACE GLYPH ======== */
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    .icon {
      animation: pulse 4s ease-in-out infinite;
    }
  </style>
</head>

<body>
  <div class="board">
    <h1><i class="fa-solid fa-school"></i> Informační tabule ZŠ Březové Hory</h1>
    <div class="subtitle">Aktuální informace • Dnešní oběd • Počasí • Akce • Novinky</div>

    <div class="grid">
      <!-- ČAS A POČASÍ -->
      <div class="card">
        <i class="fa-regular fa-clock icon"></i>
        <div id="cas">--:--:--</div>
        <div id="datum">Načítám datum...</div>
        <div id="pocasi">Načítám počasí...</div>
      </div>

      <!-- JÍDELNÍČEK -->
      <div class="card">
        <i class="fa-solid fa-utensils icon"></i>
        <h2>Dnešní oběd</h2>
        <div id="obed">Načítám jídelníček ze stránky školy...</div>
      </div>

      <!-- PLÁN AKCÍ -->
      <div class="card">
        <i class="fa-regular fa-calendar-days icon"></i>
        <h2>Plán akcí</h2>
        <p>
          <b>24. října:</b> Den otevřených dveří<br>
          <b>30. října:</b> Školní výlet – Praha Planetárium<br>
          <b>6. listopadu:</b> Halloween dílna<br>
          <b>20. listopadu:</b> Třídní schůzky<br>
        </p>
      </div>

      <!-- AKTUALITY -->
      <div class="card">
        <i class="fa-solid fa-bullhorn icon"></i>
        <h2>Aktuality ze školy</h2>
        <p>
          📢 Nové učební pomůcky ve fyzice.<br>
          📢 Od listopadu startuje školní kroužek robotiky.<br>
          📢 Připravujeme vánoční jarmark.<br>
        </p>
      </div>
    </div>

    <footer>🔄 Stránka se automaticky aktualizuje každých 15 minut • © 2025 ZŠ Březové Hory</footer>
  </div>

  <script>
    // 🕒 Čas a datum
    function updateTime() {
      const now = new Date();
      const d = now.toLocaleDateString('cs-CZ', { weekday:'long', year:'numeric', month:'long', day:'numeric' });
      const t = now.toLocaleTimeString('cs-CZ');
      document.getElementById('cas').textContent = t;
      document.getElementById('datum').textContent = d.charAt(0).toUpperCase() + d.slice(1);
    }
    setInterval(updateTime, 1000);
    updateTime();

    // 🌦️ Počasí
    async function loadWeather() {
      try {
        const res = await fetch("https://api.open-meteo.com/v1/forecast?latitude=49.69&longitude=14.01&current_weather=true");
        const data = await res.json();
        const temp = data.current_weather.temperature;
        const wind = data.current_weather.windspeed;
        const code = data.current_weather.weathercode;
        const icons = {
          0: "☀️ Jasno", 1: "🌤️ Polojasno", 2: "⛅ Oblačno", 3: "☁️ Zataženo",
          45: "🌫️ Mlha", 48: "🌫️ Mrznoucí mlha", 51: "🌦️ Mrholení", 61: "🌧️ Déšť",
          71: "❄️ Sníh", 95: "⛈️ Bouřka"
        };
        const condition = icons[code] || "🌡️ Neznámé počasí";
        document.getElementById("pocasi").innerHTML = `${condition}<br>Teplota: <b>${temp}°C</b><br>Vítr: ${wind} km/h`;
      } catch {
        document.getElementById("pocasi").innerText = "Nelze načíst počasí.";
      }
    }
    loadWeather();

    // 🍽️ Jídelníček
    async function loadObed() {
      try {
        const proxyUrl = "https://api.allorigins.win/get?url=" + encodeURIComponent("https://zsbrezovehory.cz/jidelni-listek/");
        const res = await fetch(proxyUrl);
        const data = await res.json();
        let obsah = data.contents;
        const match = obsah.match(/<main[\\s\\S]*?<\\/main>/i);
        if (match) obsah = match[0];
        document.getElementById("obed").innerHTML = obsah;
      } catch {
        document.getElementById("obed").innerText = "Nelze načíst jídelníček.";
      }
    }
    loadObed();

    // 🔁 Auto-refresh po 15 minutách
    setTimeout(() => location.reload(), 15 * 60 * 1000);
  </script>
</body>
</html>
